{
  "schemaVersion": "1.0.0",
  "name": "example.pkg",
  "version": "1.0.0",
  "description": "Example echo package used for smoke testing the worker pipeline.",
  "adapters": [
    {
      "name": "echo",
      "entrypoint": "adapters.echo",
      "capabilities": [
        "example.pkg.echo"
      ]
    },
    {
      "name": "demo",
      "entrypoint": "adapters.demo",
      "capabilities": [
        "example.pkg.load_config",
        "example.pkg.transform_text",
        "example.pkg.delay",
        "example.pkg.send_notification",
        "example.pkg.audit_log",
        "example.pkg.feedback_demo"
      ]
    }
  ],
  "python": {
    "requires": ">=3.10,<3.12",
    "dependencies": []
  },
  "nodes": [
    {
      "type": "example.pkg.echo",
      "status": "published",
      "category": "Examples",
      "label": "Echo Message",
      "description": "Emits the provided message as the node output.",
      "tags": [
        "example",
        "echo"
      ],
      "adapter": "echo",
      "handler": "echo",
      "config": {},
      "schema": {
        "parameters": {
          "type": "object",
          "properties": {
            "message": {
              "type": "string",
              "description": "Message that will be returned verbatim.",
              "default": ""
            }
          },
          "required": []
        },
        "results": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "description": "Execution status.",
              "enum": [
                "succeeded",
                "failed"
              ]
            },
            "outputs": {
              "type": "object",
              "properties": {
                "echo": {
                  "type": "string",
                  "description": "Echoed message value."
                }
              },
              "required": []
            }
          },
          "required": []
        }
      },
      "ui": {
        "widgets": [
          {
            "key": "message",
            "label": "Message",
            "component": "text",
            "binding": {
              "path": "/parameters/message"
            }
          }
        ]
      }
    },
    {
      "type": "example.pkg.load_config",
      "status": "published",
      "category": "Examples",
      "label": "Load Configuration",
      "description": "Parses a JSON configuration string and returns the resulting object.",
      "tags": [
        "example",
        "config"
      ],
      "adapter": "demo",
      "handler": "load_config",
      "config": {},
      "schema": {
        "parameters": {
          "type": "object",
          "properties": {
            "config": {
              "type": "string",
              "description": "JSON payload that will be parsed.",
              "default": "{\n  \"feature\": true,\n  \"threshold\": 0.75\n}"
            }
          },
          "required": [
            "config"
          ]
        },
        "results": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "enum": [
                "succeeded",
                "failed"
              ]
            },
            "config": {
              "type": "object",
              "description": "Parsed configuration object."
            },
            "keyCount": {
              "type": "integer",
              "description": "Number of top-level keys in the configuration."
            },
            "error": {
              "type": "string",
              "description": "Error message when parsing fails."
            }
          },
          "required": [
            "status"
          ]
        }
      },
      "ui": {
        "outputPorts": [
          {
            "key": "output",
            "label": "Config",
            "binding": {
              "path": "/results/config"
            }
          }
        ],
        "widgets": [
          {
            "key": "config",
            "label": "Configuration JSON",
            "component": "json",
            "binding": {
              "path": "/parameters/config"
            }
          }
        ]
      }
    },
    {
      "type": "example.pkg.transform_text",
      "status": "published",
      "category": "Examples",
      "label": "Transform Text",
      "description": "Applies a formatting mode to the provided text.",
      "tags": [
        "example",
        "text"
      ],
      "adapter": "demo",
      "handler": "transform_text",
      "config": {},
      "schema": {
        "parameters": {
          "type": "object",
          "properties": {
            "text": {
              "type": "string",
              "description": "Text to transform.",
              "default": ""
            },
            "mode": {
              "type": "string",
              "description": "Transformation mode.",
              "enum": [
                "uppercase",
                "lowercase",
                "title",
                "reverse"
              ],
              "default": "uppercase"
            }
          },
          "required": [
            "text"
          ]
        },
        "results": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "enum": [
                "succeeded",
                "failed"
              ]
            },
            "output": {
              "type": "string",
              "description": "Transformed text."
            },
            "modeApplied": {
              "type": "string",
              "description": "Transformation mode that was applied."
            }
          },
          "required": [
            "status"
          ]
        }
      },
      "ui": {
        "inputPorts": [
          {
            "key": "input",
            "label": "Text",
            "binding": {
              "path": "/parameters/text"
            }
          }
        ],
        "outputPorts": [
          {
            "key": "output",
            "label": "Transformed",
            "binding": {
              "path": "/results/output"
            }
          }
        ],
        "widgets": [
          {
            "key": "text",
            "label": "Text",
            "component": "text",
            "binding": {
              "path": "/parameters/text"
            }
          },
          {
            "key": "mode",
            "label": "Mode",
            "component": "text",
            "binding": {
              "path": "/parameters/mode"
            },
            "options": {
              "helperText": "Choose between uppercase, lowercase, title, or reverse."
            }
          }
        ]
      }
    },
    {
      "type": "example.pkg.delay",
      "status": "published",
      "category": "Examples",
      "label": "Delay",
      "description": "Waits for the specified duration to simulate a long-running task.",
      "tags": [
        "example",
        "timing"
      ],
      "adapter": "demo",
      "handler": "delay",
      "config": {},
      "schema": {
        "parameters": {
          "type": "object",
          "properties": {
            "durationSeconds": {
              "type": "number",
              "description": "Number of seconds to wait.",
              "minimum": 0,
              "default": 1
            }
          },
          "required": [
            "durationSeconds"
          ]
        },
        "results": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "enum": [
                "succeeded",
                "failed"
              ]
            },
            "durationSeconds": {
              "type": "number",
              "description": "Actual time waited in seconds."
            }
          },
          "required": [
            "status"
          ]
        }
      },
      "ui": {
        "inputPorts": [
          {
            "key": "input",
            "label": "Start",
            "binding": {
              "path": "/parameters/durationSeconds"
            }
          }
        ],
        "outputPorts": [
          {
            "key": "output",
            "label": "Done",
            "binding": {
              "path": "/results/durationSeconds"
            }
          }
        ],
        "widgets": [
          {
            "key": "durationSeconds",
            "label": "Duration (seconds)",
            "component": "number",
            "binding": {
              "path": "/parameters/durationSeconds"
            }
          }
        ]
      }
    },
    {
      "type": "example.pkg.send_notification",
      "status": "published",
      "category": "Examples",
      "label": "Send Notification",
      "description": "Simulates sending a notification to a recipient.",
      "tags": [
        "example",
        "notification"
      ],
      "adapter": "demo",
      "handler": "send_notification",
      "config": {},
      "schema": {
        "parameters": {
          "type": "object",
          "properties": {
            "recipient": {
              "type": "string",
              "description": "Target recipient identifier.",
              "default": ""
            },
            "channel": {
              "type": "string",
              "description": "Delivery channel name.",
              "default": "email"
            },
            "message": {
              "type": "string",
              "description": "Notification message content.",
              "default": "Hello from AstraFlow!"
            }
          },
          "required": [
            "recipient",
            "message"
          ]
        },
        "results": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "enum": [
                "succeeded",
                "failed"
              ]
            },
            "notificationId": {
              "type": "string",
              "description": "Generated identifier for the notification."
            }
          },
          "required": [
            "status"
          ]
        }
      },
      "ui": {
        "inputPorts": [
          {
            "key": "input",
            "label": "Payload",
            "binding": {
              "path": "/parameters/message"
            }
          }
        ],
        "outputPorts": [
          {
            "key": "output",
            "label": "Notification",
            "binding": {
              "path": "/results/notificationId"
            }
          }
        ],
        "widgets": [
          {
            "key": "recipient",
            "label": "Recipient",
            "component": "text",
            "binding": {
              "path": "/parameters/recipient"
            }
          },
          {
            "key": "channel",
            "label": "Channel",
            "component": "text",
            "binding": {
              "path": "/parameters/channel"
            }
          },
          {
            "key": "message",
            "label": "Message",
            "component": "textarea",
            "binding": {
              "path": "/parameters/message"
            }
          }
        ]
      }
    },
    {
      "type": "example.pkg.audit_log",
      "status": "published",
      "category": "Examples",
      "label": "Audit Log",
      "description": "Writes an audit log entry containing contextual information.",
      "tags": [
        "example",
        "logging"
      ],
      "adapter": "demo",
      "handler": "audit_log",
      "config": {},
      "schema": {
        "parameters": {
          "type": "object",
          "properties": {
            "level": {
              "type": "string",
              "description": "Log level for the entry.",
              "default": "info"
            },
            "message": {
              "type": "string",
              "description": "Message to include in the audit log.",
              "default": "Workflow step completed."
            }
          }
        },
        "results": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "enum": [
                "succeeded",
                "failed"
              ]
            },
            "entry": {
              "type": "object",
              "description": "Audit log details that were recorded."
            }
          },
          "required": [
            "status"
          ]
        }
      },
      "ui": {
        "inputPorts": [
          {
            "key": "input",
            "label": "Event",
            "binding": {
              "path": "/parameters/message"
            }
          }
        ],
        "widgets": [
          {
            "key": "level",
            "label": "Level",
            "component": "text",
            "binding": {
              "path": "/parameters/level"
            }
          },
          {
            "key": "message",
            "label": "Message",
            "component": "textarea",
            "binding": {
              "path": "/parameters/message"
            }
          }
        ]
      }
    },
    {
      "type": "example.pkg.feedback_demo",
      "status": "published",
      "category": "Examples",
      "label": "Feedback Showcase",
      "description": "Streams progress, metrics, and live tokens using task feedback.",
      "tags": [
        "example",
        "feedback",
        "streaming"
      ],
      "adapter": "demo",
      "handler": "feedback_showcase",
      "config": {},
      "schema": {
        "parameters": {
          "type": "object",
          "properties": {
            "prompt": {
              "type": "string",
              "description": "Text that will be streamed token-by-token.",
              "default": "Hello AstraFlow!"
            },
            "tokenDelayMs": {
              "type": "number",
              "description": "Delay in milliseconds between emitted tokens.",
              "default": 80,
              "minimum": 0
            }
          },
          "required": []
        },
        "results": {
          "type": "object",
          "properties": {
            "status": {
              "type": "string",
              "enum": [
                "succeeded",
                "failed"
              ]
            },
            "summary": {
              "type": "string",
              "description": "Concatenated token stream produced by the demo."
            },
            "tokenCount": {
              "type": "integer",
              "description": "Number of tokens emitted during the stream."
            }
          },
          "required": [
            "status"
          ]
        }
      },
      "ui": {
        "inputPorts": [
          {
            "key": "prompt",
            "label": "Prompt",
            "binding": {
              "path": "/parameters/prompt"
            }
          }
        ],
        "outputPorts": [
          {
            "key": "summary",
            "label": "Summary",
            "binding": {
              "path": "/results/summary"
            }
          }
        ],
        "widgets": [
          {
            "key": "prompt",
            "label": "Prompt",
            "component": "textarea",
            "binding": {
              "path": "/parameters/prompt"
            },
            "options": {
              "rows": 3
            }
          },
          {
            "key": "tokenDelayMs",
            "label": "Token Delay (ms)",
            "component": "number",
            "binding": {
              "path": "/parameters/tokenDelayMs"
            },
            "options": {
              "min": 0,
              "step": 10
            }
          }
        ]
      }
    }
  ],
  "resources": [],
  "hooks": {
    "install": [],
    "uninstall": []
  }
}